# Orochi Cloud Autoscaler Configuration
# Copy this file to config.yaml and modify as needed

server:
  grpcPort: 50051
  metricsPort: 9090
  healthPort: 8080
  shutdownTimeout: 30s

kubernetes:
  # Set to true when running inside Kubernetes
  inCluster: true
  # Path to kubeconfig (only used when inCluster is false)
  kubeconfig: ""
  # Namespace to watch (empty means all namespaces)
  namespace: ""
  # Resync period for informers
  resyncPeriod: 30s
  # Kubernetes API client rate limiting
  qps: 50
  burst: 100
  # Label selector for filtering resources
  labelSelector: "app.kubernetes.io/managed-by=orochi-operator"

prometheus:
  # Prometheus server address
  address: "http://prometheus:9090"
  # Query timeout
  timeout: 30s
  # Metric prefix for Orochi metrics
  metricPrefix: "orochi_"
  # How often to scrape metrics
  scrapeInterval: 15s

scaling:
  # How often to evaluate scaling decisions
  evaluationInterval: 15s
  # How long to keep metric history
  metricHistoryWindow: 5m
  # Stabilization window for scale-down decisions
  stabilizationWindow: 3m
  # Maximum concurrent scaling operations
  maxConcurrentScaling: 5

  horizontal:
    # Default minimum replicas
    minReplicas: 1
    # Default maximum replicas
    maxReplicas: 10
    # Target CPU utilization percentage
    targetCPUUtilization: 70
    # Target memory utilization percentage
    targetMemoryUtilization: 80
    # Target connections per pod
    targetConnectionsPerPod: 100
    # Target query latency in milliseconds (P95)
    targetQueryLatencyMs: 100
    # Cooldown after scale-up
    scaleUpCooldown: 60s
    # Cooldown after scale-down
    scaleDownCooldown: 300s
    # Maximum replicas to add per scaling event
    scaleUpStep: 2
    # Maximum replicas to remove per scaling event
    scaleDownStep: 1
    # Scale-up threshold (1.1 = 10% above target)
    scaleUpThreshold: 1.1
    # Scale-down threshold (0.9 = 10% below target)
    scaleDownThreshold: 0.9

  vertical:
    # Minimum CPU request
    minCPU: "250m"
    # Maximum CPU request
    maxCPU: "8"
    # Minimum memory request
    minMemory: "512Mi"
    # Maximum memory request
    maxMemory: "32Gi"
    # Target CPU utilization for right-sizing
    targetCPUUtilization: 70
    # Target memory utilization for right-sizing
    targetMemoryUtilization: 80
    # Cooldown after vertical scaling
    cooldown: 600s
    # CPU increment for scaling
    cpuIncrement: "250m"
    # Memory increment for scaling
    memoryIncrement: "256Mi"

logging:
  # Log level: debug, info, warn, error
  level: "info"
  # Log format: json, text
  format: "json"
  # Output: stdout, stderr, or file path
  output: "stdout"

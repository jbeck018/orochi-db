-- Basic Orochi DB tests
-- Test extension creation and basic functionality
-- Test: Extension loads successfully
CREATE EXTENSION orochi;
SELECT orochi_version();
 orochi_version
----------------
 1.0.0
(1 row)

-- Test: Schema created
SELECT schema_name FROM information_schema.schemata WHERE schema_name = 'orochi';
 schema_name
-------------
 orochi
(1 row)

-- Test: Catalog tables exist
SELECT tablename FROM pg_tables
WHERE schemaname = 'orochi'
ORDER BY tablename;
            tablename
---------------------------------
 orochi_chunks
 orochi_column_chunks
 orochi_continuous_aggregates
 orochi_invalidation_log
 orochi_nodes
 orochi_shard_placements
 orochi_shards
 orochi_stripes
 orochi_tables
 orochi_tiering_policies
 orochi_vector_indexes
(11 rows)

-- Test: Basic views accessible
SELECT COUNT(*) >= 0 AS has_tables_view FROM orochi.tables;
 has_tables_view
-----------------
 t
(1 row)

SELECT COUNT(*) >= 0 AS has_shards_view FROM orochi.shards;
 has_shards_view
-----------------
 t
(1 row)

SELECT COUNT(*) >= 0 AS has_chunks_view FROM orochi.chunks;
 has_chunks_view
-----------------
 t
(1 row)

SELECT COUNT(*) >= 0 AS has_nodes_view FROM orochi.nodes;
 has_nodes_view
----------------
 t
(1 row)

-- Test: Vector type exists
SELECT typname FROM pg_type WHERE typname = 'vector';
 typname
---------
 vector
(1 row)

-- Cleanup
DROP EXTENSION orochi CASCADE;
